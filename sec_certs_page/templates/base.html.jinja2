<!doctype html>
<html lang="en">

<head>
    {% block head %}
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="application-name" content="Security Certifications"/>
        {% block title %}<title>{{ title|default("seccerts.org") }}</title>{% endblock %}
        <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.png') }}"/>
        {% assets output="gen/libs.css",
                "lib/bootstrap.min.css", "lib/fontawesome.min.css", "lib/metropolis.css" %}
            <link rel="stylesheet" href="{{ ASSET_URL }}">
        {% endassets %}
        <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&display=swap"
              rel="stylesheet">
        <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
        {% assets output="gen/libs.js",
                "lib/jquery.min.js", "lib/bootstrap.bundle.min.js", "lib/d3.min.js", "lib/d3-legend.min.js" %}
            <script type="text/javascript" src="{{ ASSET_URL }}"></script>
        {% endassets %}
        <!-- Matomo -->
        <script type="text/javascript">
            var _paq = window._paq = window._paq || [];
            /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
            _paq.push(['trackPageView']);
            _paq.push(['enableLinkTracking']);
            (function () {
                var u = "https://fadmin.fi.muni.cz/piwik/";
                _paq.push(['setTrackerUrl', u + 'matomo.php']);
                _paq.push(['setSiteId', '44']);
                var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
                g.type = 'text/javascript';
                g.async = true;
                g.src = u + 'matomo.js';
                s.parentNode.insertBefore(g, s);
            })();
        </script>
        <noscript><p><img src="https://fadmin.fi.muni.cz/piwik/matomo.php?idsite=44&rec=1" style="border:0;" alt=""/>
        </p></noscript>
        <!-- End Matomo Code -->
        <meta name="google-site-verification" content="eW6ZAStAlQUFlO_OP8odanoJp_yXBTvIqvlVScyTu3g"/>
    {% endblock %}
</head>

<body data-spy="scroll" data-target="#navbar" data-offset="57" class="position-relative">
<div class="d-flex" id="wrapper">
    <nav id="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="{{ url_for("index") }}">seccerts.org</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    {% block navbar %}
                    {% endblock %}
                </ul>
            </div>
            {% if search %}
                <form class="d-flex" action="{{ url_for(".search") }}" method="get">
                    <input class="form-control me-2" type="search" placeholder="Search" name="q" aria-label="Search">
                    <button class="btn btn-outline-primary px-4" type="submit"><i class="fa fa-search"></i></button>
                </form>
            {% endif %}
            {% if is_admin() %}
                <div class="mx-2">
                    <a href="{{ url_for("admin.index") }}" class="btn btn-outline-secondary px-4" role="button"><i
                            class="fa fa-user"></i> Admin</a>
                </div>
            {% endif %}
        </div>
    </nav>
    <div id="page-content-wrapper" class="container-fluid">
        <div id="content">
            {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages %}
                    <div class="flashes col-10 mx-auto p-3">
                        {% for category, message in messages %}
                            {% if category == "message" %}
                                <div class="alert alert-primary">{{ message }}</div>
                            {% elif category == "error" %}
                                <div class="alert alert-danger">{{ message }}</div>
                            {% elif category == "info" %}
                                <div class="alert alert-info">{{ message }}</div>
                            {% elif category == "warning" %}
                                <div class="alert alert-warning">{{ message }}</div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            {% if crumbs %}
                <div class="col-10 mx-auto px-3 pt-3 pb-2 fw-lighter">
                    {%- for breadcrumb in breadcrumbs -%}
                        <a href="{{ breadcrumb.url }}">{{ breadcrumb.text }}</a>
                        {{ '/ ' if not loop.last }}
                    {%- endfor -%}
                </div>
            {% endif %}
            {% block content %}
            {% endblock %}
            <div class="modal fade" id="notification-modal" tabindex="-1" aria-labelledby="notification-modal-label"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="notification-modal-label">Notifications</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            You currently have no subscriptions to certificate updates. Select certificates on the
                            search page or on the page of the certificate. After you do so you will be able to see them
                            here and setup an email notification subscription.
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
            <footer>
                {% block footer %}
                    <div class="row justify-content-center py-5 row-cols-1 row-cols-md-2">
                        <div class="col-5 col-sm-4 col-md-3 col-lg-2">
                            <a href="https://crocs.fi.muni.cz">
                                <img src="{{ url_for("static", filename="img/crocs_claim.svg") }}"
                                     alt="Centre for Research on Cryptography and Security" style="width: 100%"/>
                            </a>
                        </div>
                        <div class="col-5 col-sm-4 col-md-3 col-lg-2">
                            <p class="fw-light">Check out our <a href="https://github.com/crocs-muni/sec-certs"
                                                                 target="_blank" rel="noopener">Github</a>.</p>
                            <p class="fw-light">Developed with Flask &amp; MongoDB.</p>
                            {% if current_user.is_authenticated %}
                                <p class="fw-light"><a href="{{ url_for("admin.logout") }}" style="opacity: 50%;"
                                                       title="Lemme out"><i class="fas fa-sign-out-alt"></i></a></p>
                            {% else %}
                                <p class="fw-light"><a href="{{ url_for("admin.login") }}" style="opacity: 50%;"
                                                       title="Lemme in"><i class="fas fa-sign-in-alt"></i></a></p>
                            {% endif %}
                        </div>
                    </div>
                    <div id="notifications">
                        <button id="notification-icon" class="btn btn-secondary" title="Notifications"
                                data-bs-toggle="modal" data-bs-target="#notification-modal">
                            <i class="fas fa-envelope" aria-hidden="true"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary">
                            0
                            <span class="visually-hidden">selected certificates</span>
                          </span>
                        </button>
                    </div>
                    <div id="up-top">
                        <a title="Back to top" aria-label="Back to top" href="#">
                        <span id="up-top-icon" class="fa-stack fa-lg">
                            <i class="fas fa-circle fa-stack-2x" aria-hidden="true"></i>
                            <i class="fas fa-chevron-up fa-stack-1x fa-inverse" aria-hidden="true"></i>
                        </span>
                        </a>
                    </div>
                {% endblock %}
            </footer>
        </div>
    </div>
</div>
<script>
    $(function () {
        let tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>
</body>
</html>
